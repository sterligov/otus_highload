[{"/home/sterligov/Development/otus_highload/dating/frontend/src/index.js":"1","/home/sterligov/Development/otus_highload/dating/frontend/src/reportWebVitals.js":"2","/home/sterligov/Development/otus_highload/dating/frontend/src/App.js":"3","/home/sterligov/Development/otus_highload/dating/frontend/src/components/Login.jsx":"4","/home/sterligov/Development/otus_highload/dating/frontend/src/authService.jsx":"5","/home/sterligov/Development/otus_highload/dating/frontend/src/components/Router.jsx":"6","/home/sterligov/Development/otus_highload/dating/frontend/src/components/Error.jsx":"7","/home/sterligov/Development/otus_highload/dating/frontend/src/components/Logout.jsx":"8","/home/sterligov/Development/otus_highload/dating/frontend/src/components/UserList.jsx":"9","/home/sterligov/Development/otus_highload/dating/frontend/src/components/Profile.jsx":"10","/home/sterligov/Development/otus_highload/dating/frontend/src/components/ListPlaceholder.jsx":"11","/home/sterligov/Development/otus_highload/dating/frontend/src/components/Registration.jsx":"12","/home/sterligov/Development/otus_highload/dating/frontend/src/axiosConfig.jsx":"13","/home/sterligov/Development/otus_highload/dating/frontend/src/components/Menu.jsx":"14","/home/sterligov/Development/otus_highload/dating/frontend/src/components/FriendsList.jsx":"15"},{"size":664,"mtime":1610989680817,"results":"16","hashOfConfig":"17"},{"size":362,"mtime":1610143949073,"results":"18","hashOfConfig":"17"},{"size":248,"mtime":1611163693337,"results":"19","hashOfConfig":"17"},{"size":3388,"mtime":1611176577891,"results":"20","hashOfConfig":"17"},{"size":1097,"mtime":1611183029394,"results":"21","hashOfConfig":"17"},{"size":1655,"mtime":1611181296416,"results":"22","hashOfConfig":"17"},{"size":792,"mtime":1610917209727,"results":"23","hashOfConfig":"17"},{"size":263,"mtime":1610990808248,"results":"24","hashOfConfig":"17"},{"size":4994,"mtime":1611176385345,"results":"25","hashOfConfig":"17"},{"size":4389,"mtime":1611183818168,"results":"26","hashOfConfig":"17"},{"size":394,"mtime":1610916825719,"results":"27","hashOfConfig":"17"},{"size":9030,"mtime":1611175637847,"results":"28","hashOfConfig":"17"},{"size":479,"mtime":1611182363547,"results":"29","hashOfConfig":"17"},{"size":1531,"mtime":1611165208888,"results":"30","hashOfConfig":"17"},{"size":3119,"mtime":1611170073413,"results":"31","hashOfConfig":"17"},{"filePath":"32","messages":"33","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"118eoa4",{"filePath":"35","messages":"36","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"37","messages":"38","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"49","messages":"50","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"34"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"34"},"/home/sterligov/Development/otus_highload/dating/frontend/src/index.js",[],["64","65"],"/home/sterligov/Development/otus_highload/dating/frontend/src/reportWebVitals.js",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/App.js",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/components/Login.jsx",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/authService.jsx",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/components/Router.jsx",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/components/Error.jsx",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/components/Logout.jsx",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/components/UserList.jsx",["66"],"import React from \"react\";\nimport axios from \"axios\";\nimport Error from \"./Error\";\nimport {Link, withRouter} from \"react-router-dom\";\nimport ListPlaceholder from \"./ListPlaceholder\";\nimport Menu from \"./Menu\";\nimport {authService} from \"../authService\";\n\nclass UserList extends React.Component {\n    constructor(props) {\n        super(props);\n        this.state = {\n            users: [],\n            friends: {},\n        };\n        this.subscribeHandler = this.subscribeHandler.bind(this);\n    }\n\n    subscribeHandler(e) {\n        let friends = {...this.state.friends};\n        let url = `v1/friends/${e.target.dataset.user}`;\n\n        if (e.target.dataset.friend == 1) {\n            delete friends[e.target.dataset.user];\n            axios.delete(url)\n                .then(\n                    () => {\n                        if (this._isMounted) {\n                            this.setState({\n                                friends: friends,\n                            });\n                        }\n                    },\n                    () => {\n                        if (this._isMounted) {\n                            alert(\"Произошла ошибка при отписке\");\n                        }\n                    }\n                )\n        } else {\n            friends[e.target.dataset.user] = true;\n            axios.post(url)\n                .then(\n                    () => {\n                        if (this._isMounted) {\n                            this.setState({\n                                friends: friends,\n                            });\n                        }\n                    },\n                    () => {\n                        if (this._isMounted) {\n                            alert(\"Произошла ошибка при подписке\");\n                        }\n                    }\n                )\n        }\n    }\n\n    componentDidMount() {\n        this.cancelSource = axios.CancelToken.source();\n        this._isMounted = true;\n        document.title = \"Список пользователей\";\n\n        axios.get(\"v1/friends\", {cancelToken: this.cancelSource.token})\n            .then(\n                result => {\n                    if (this._isMounted) {\n                        let friends = {};\n                        for (let i = 0; i < result.data.length; i++) {\n                            let u = result.data[i];\n                            friends[u[\"id\"]] = true;\n                        }\n                        this.setState({friends: friends,});\n                    }\n                },\n                () => {\n                    if (this._isMounted) {\n                        alert(\"Произошла ошибка при обращении к серверу\");\n                    }\n                }\n            );\n\n        axios.get(\"v1/users\", {cancelToken: this.cancelSource.token})\n            .then(\n                result => {\n                    if (this._isMounted) {\n                        this.setState({\n                            users: result.data,\n                        });\n                    }\n                },\n                () => {\n                    if (this._isMounted) {\n                        alert(\"Произошла ошибка при обращении к серверу\");\n                    }\n                }\n            );\n    }\n\n    componentWillUnmount() {\n        this._isMounted = false;\n        this.cancelSource.cancel();\n    }\n\n    render() {\n        if (this.state.error) {\n            return <Error err={this.state.error}/>\n        }\n\n        const friends = this.state.friends;\n\n        return (\n            <>\n                <Menu/>\n                <div>\n                    <h5>Список пользователей</h5>\n                    {this.state.users.length === 0 &&\n                    <ListPlaceholder number={3}/>\n                    }\n                    {this.state.users.map(user =>\n                        <div className=\"mb-3\" key={`user_${user[\"id\"]}`}>\n                            <Link to={`/profile/${user[\"id\"]}`} rel=\"noopener noreferrer\">\n                                {`${user[\"first_name\"]} ${user[\"last_name\"]} (${user[\"city\"][\"name\"]})`}\n                            </Link>\n                            {!authService.isUser(user[\"email\"]) &&\n                                <button\n                                    className=\"btn btn-sm btn-info ml-2\"\n                                    data-user={user[\"id\"]}\n                                    data-friend={friends[user[\"id\"]] === undefined ? 0 : 1}\n                                    onClick={this.subscribeHandler}>\n                                    {friends[user[\"id\"]] === undefined ? \"Подписаться\" : \"Отписаться\"}\n                                </button>\n                            }\n                        </div>\n                    )}\n                </div>\n            </>\n        );\n    }\n}\n\nexport default withRouter(UserList);\n","/home/sterligov/Development/otus_highload/dating/frontend/src/components/Profile.jsx",["67","68","69"],"/home/sterligov/Development/otus_highload/dating/frontend/src/components/ListPlaceholder.jsx",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/components/Registration.jsx",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/axiosConfig.jsx",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/components/Menu.jsx",[],"/home/sterligov/Development/otus_highload/dating/frontend/src/components/FriendsList.jsx",[],{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","replacedBy":"73"},{"ruleId":"74","severity":1,"message":"75","line":23,"column":37,"nodeType":"76","messageId":"77","endLine":23,"endColumn":39},{"ruleId":"78","severity":1,"message":"79","line":3,"column":9,"nodeType":"80","messageId":"81","endLine":3,"endColumn":17},{"ruleId":"78","severity":1,"message":"82","line":3,"column":19,"nodeType":"80","messageId":"81","endLine":3,"endColumn":25},{"ruleId":"74","severity":1,"message":"75","line":21,"column":37,"nodeType":"76","messageId":"77","endLine":21,"endColumn":39},"no-native-reassign",["83"],"no-negated-in-lhs",["84"],"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","no-unused-vars","'Redirect' is defined but never used.","Identifier","unusedVar","'Switch' is defined but never used.","no-global-assign","no-unsafe-negation"]